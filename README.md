# 12306 自动抢票系统

这是一个基于Python的12306网站自动抢票系统。

## 功能特点

- ✅ 自动登录12306账号（默认扫码登录，兼容旧图形验证码流程）
- ✅ 验证码自动识别（使用ddddocr，若官方恢复图形验证码时可用）
- ✅ Session管理
- 🔄 抢票功能（开发中）

## 环境要求

- Python 3.7+
- pip

## 安装步骤

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置信息

编辑 `config.py` 文件，修改以下信息：

```python
USERNAME = "你的用户名"
PASSWORD = "你的密码"
PHONE = "你的手机号"
ID_CARD_LAST_FOUR = "身份证后四位"
```

### 3. 运行登录

```bash
python main.py
```

或者直接运行登录模块：

```bash
python login.py
```

## 项目结构

```
Ticker12306/
├── config.py          # 配置文件（用户信息、URL等）
├── login.py           # 登录模块
├── main.py            # 主程序入口
├── requirements.txt   # 项目依赖
└── README.md          # 项目说明
```

## 使用说明

### 登录流程

**默认扫码登录**
1. 运行程序后会生成二维码图片（`qr_时间戳.png`）
2. 使用 12306 手机App 扫码并确认授权
3. 程序自动完成最终认证

**兼容旧图形验证码登录（若官方恢复）**
1. 程序会自动获取验证码图片
2. 使用OCR自动识别验证码
3. 校验验证码
4. 提交登录信息
5. 完成最终认证

验证码/二维码图片会保存在当前目录，文件名格式分别为 `captcha_时间戳.png` 或 `qr_时间戳.png`

## 注意事项

1. **请妥善保管账号密码**，不要将包含真实账号信息的代码上传到公共仓库
2. 12306网站可能会更新接口，如遇问题请检查API是否变化
3. 建议使用频率不要过高，避免被网站限制
4. 本工具仅供学习交流使用，请遵守12306网站使用规则

## 开发计划

- [x] 基础登录功能
- [ ] 查询车票
- [ ] 自动抢票
- [ ] 订单管理
- [ ] 消息通知

## 依赖说明

- `requests`: HTTP请求库
- `Pillow`: 图片处理
- `ddddocr`: 验证码识别
- `selenium`: 浏览器自动化（备用方案）
- `python-dotenv`: 环境变量管理

## 常见问题

### Q: 验证码识别率低怎么办？
A: 可以手动查看保存的验证码图片，在代码中传入正确答案。

### Q: 登录失败？
A: 检查账号密码是否正确，网络是否正常，Cookie是否过期。

## 许可证

本项目仅供学习交流使用。
